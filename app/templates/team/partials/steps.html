<div class="col-lg-6 text-center d-flex flex-column align-items-center">
    <form id="save-form" method="POST" action="/team/create" enctype="multipart/form-data" class="w-100">
        <div class="step-container w-100 mb-3" style="min-height: 500px;">

            <!-- Step 1: Shape -->
            <div id="step-shape" class="w-100">
                <h5>Select a Shield Shape</h5>
                <div class="row g-3 mb-4 mt-3">
                    {% for shape in base_files %}
                    <div class="col-4 d-flex justify-content-center">
                        <img src="/static/team_creation_assets/base/{{ shape }}"
                             data-shape="{{ shape }}"
                             class="shape-thumb"
                             style="width: 100px; height: auto; border: 3px solid transparent; border-radius: 8px; cursor: pointer;" />
                    </div>
                    {% endfor %}
                </div>
            </div>

            <!-- Step 2: Pattern -->
            <div id="step-pattern" class="w-100" style="display: none;">
                <h5>Select a Pattern</h5>
                <div class="row g-3 mt-2">
                    {% for num in range(1, 7) %}
                    <div class="col-4 d-flex justify-content-center">
                        <div class="pattern-thumb" data-pattern="pattern{{ num }}"
                             style="width: 60px; height: 60px; border: 2px solid transparent; cursor: pointer;">
                            <svg id="thumb-pattern{{ num }}" width="60" height="60"></svg>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>

            <!-- Step 3: Color -->
            <div id="step-color" class="w-100" style="display: none;">
                <h5>Select Colors</h5>
                <div class="d-flex justify-content-center mt-3 gap-5">
                    <div class="text-center">
                        <p>Primary Color</p>
                        <div id="primary-picker"></div>
                    </div>
                    <div class="text-center">
                        <p>Secondary Color</p>
                        <div id="secondary-picker"></div>
                    </div>
                </div>

                <div class="text-center mt-4">
                    <p><strong>Move Pattern</strong></p>
                    <div id="pattern-move-pad"
                         style="width: 150px; height: 150px; background: #f5f5f5; border: 1px solid #ccc; cursor: grab; position: relative; margin: 0 auto;">
                        <div id="pad-indicator"
                             style="width: 10px; height: 10px; background: #007bff; border-radius: 50%; position: absolute; top: 70px; left: 70px;">
                        </div>
                    </div>

                    <div class="mt-4">
                        <p><strong>Zoom Pattern</strong></p>
                        <div class="d-flex justify-content-center align-items-center gap-2">
                            <input type="range" id="zoom-range" min="10" max="200" step="0.5" value="60" style="width: 150px;">
                            <input type="number" id="zoom-value" min="10" max="200" step="0.1" value="60" style="width: 60px;">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step 4: Icon -->
            <div id="step-icon" class="w-100" style="display: none;">
                <h5>Choose or Upload an Icon</h5>
                <div class="row g-3 mt-3 justify-content-center" id="icon-container"></div>
                <input type="file" name="icon-upload" id="icon-upload" accept=".png,.svg" class="form-control mt-3" />
                <div class="text-center mt-2">
                    <button class="btn btn-sm btn-warning" type="button" id="reset-icon-choice">Reset Selection</button>
                </div>

                <div class="mt-3">
                    <button class="btn btn-secondary me-2" id="icon-prev" disabled>Previous</button>
                    <button class="btn btn-secondary" id="icon-next">Next</button>
                </div>

                <div class="text-center mt-4">
                    <p><strong>Move Icon</strong></p>
                    <div class="d-flex flex-column align-items-center gap-2">
                        <button type="button" class="icon-control-btn" onclick="moveIcon(0, -10)">
                            <i class="fas fa-arrow-up"></i>
                        </button>
                        <div class="d-flex gap-2">
                            <button type="button" class="icon-control-btn" onclick="moveIcon(-10, 0)">
                                <i class="fas fa-arrow-left"></i>
                            </button>
                            <button type="button" class="icon-control-btn" onclick="moveIcon(10, 0)">
                                <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                        <button type="button" class="icon-control-btn" onclick="moveIcon(0, 10)">
                            <i class="fas fa-arrow-down"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Step 5: Name -->
            <div id="step-name" class="w-100" style="display: none;">
                <h5>Name Your Team</h5>
                <div class="mb-3">
                    <input type="text" class="form-control" name="name" id="team-name" placeholder="Enter Team Name" required>
                </div>
                <input type="hidden" name="primary_color" id="form_primary_color">
                <input type="hidden" name="secondary_color" id="form_secondary_color">
                <input type="hidden" name="icon_filename" id="form_icon_filename">
                <input type="file" name="icon-upload" id="form_icon_upload" style="display: none;" />
                <input type="hidden" name="final_svg" id="final_svg">
                <button type="submit" class="btn btn-success">Save Team</button>
            </div>

            <!-- Navigation Buttons -->
            <div class="d-flex justify-content-center mt-2" style="min-height: 60px;">
                <button class="btn btn-secondary me-2" id="btn-back" style="display: none;">Back</button>
                <button class="btn btn-primary" id="btn-next" disabled>Next</button>
            </div>

        </div>
    </form>
</div>
